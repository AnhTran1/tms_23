<% provide(:title, @course.name) %>
<h1><%= @course.name %></h1>
<div class="row">
  <div class="span6 offset3">
    <% @course_subjects.each do |course_subject| %>
      <div>
        <% if @course.started? && @course.finish == 0%>
          <%= link_to course_subject.subject.name, 
            edit_supervisors_course_course_subject_path(@course, course_subject.subject) %>
        <% elsif @course.finish == 1 %>
          <%= link_to course_subject.subject.name, 
            edit_supervisors_course_course_subject_path(@course, course_subject.subject) %>
        <% else %>
          <%= link_to course_subject.subject.name, 
            supervisors_course_course_subject_path(@course, course_subject.subject) %>
        <% end %>
      </div>
    <% end %>

    <%if @course.started? && @course.finish == 0 %>
      <div><h3>This course is started</h3></div>          
      <%= form_for [:supervisors, @course] do |f| %>
        <%= render 'shared/error_messages', object: f.object %>
        <div>Click Finish to finish this course</div>
        <%= f.submit "Finish", class: "btn btn-large btn-primary" %>  
        <% end %>
    <% elsif @course.finish == 1 %>  
      <div><h3>This course is Finished</h3></div>  
    <% else %>
      <%= form_for [:supervisors, @course] do |f| %>
        <%= render 'shared/error_messages', object: f.object %>
        <div>This course dosen't start, click start to start this course</div>
        <%= f.submit "Start", class: "btn btn-large btn-primary" %>

      <% end %>
    <% end %>

    <div><%= link_to "Assigin Trainee", edit_supervisors_course_assign_trainees_path(@course) %></div>
    <div><%= link_to "Assign Supervisor", edit_supervisors_course_assign_supervisors_path(@course) %></div>
    <div class="view-hidden-trainee">Trainee in Course</div>
    <div class="trainee-in-course">
      <% @course.trainee_courses.each do |trainee_course| %>
        <div>
          <%= trainee_course.user.name %>
          <% if trainee_course.finish? %>
            finished
          <% else %>
          <%= link_to 'Accept finish',
            supervisors_course_trainee_course_url(@course.id, trainee_course, finish: 1), method: :patch %>
          <% end %>
        </div>
      <% end %>
    </div>